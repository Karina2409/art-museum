import{$ as _,A as c,Da as A,J as h,O as w,_ as b,a as m,b as g,fa as v,i as n,k as s,q as l,ta as p,ua as k,x as f}from "./chunk-HBEHPOXJ.js";var y=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=w({type:r,selectors:[["app-loader"]],decls:4,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],["role","status",1,"spinner-border","text-warning"],[1,"visually-hidden"]],template:function(t, e){t&1&&(b(0,"div",0)(1,"div",1)(2,"span",2),v(3,"Loading..."),_()()())},encapsulation:2})};var I=class r{totalPages=h(100);http=c(k);notification=c(A);apiUrl="https://api.artic.edu/api/v1/artworks";static getArtworkImageUrl(i, t){let e;return i.image_id!==null?e=`${t}/${i.image_id}/full/843,/0/default.jpg`:e="default-image.png",e}getArtworks(i=1, t=3){let e=new p().set("fields","id,title,artist_title,image_id,is_on_view").set("page",i.toString()).set("limit",t.toString());return this.http.get(this.apiUrl,{params:e}).pipe(s(o=>o.data.map(a=>g(m({},a),{image_url:r.getArtworkImageUrl(a,o.config.iiif_url)}))),l(o=>(this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0440\u0442\u0438\u043D. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger"),n(()=>o))))}getArtworkById(i){let t=new p().set("fields","id,title,date_display,image_id,is_on_view,dimensions,credit_line,department_title,artist_title");return this.http.get(`${this.apiUrl}/${i}`,{params:t}).pipe(s(e=>g(m({},e.data),{image_url:r.getArtworkImageUrl(e.data,e.config.iiif_url)})),l(e=>(this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0440\u0442\u0438\u043D\u044B \u043F\u043E id. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger"),n(()=>e))))}getTotalPages(){let i=new p().set("limit","0");return this.http.get(this.apiUrl,{params:i}).pipe(s(t=>{let e=+t.pagination.total_pages;return this.totalPages.set(e),e}),l(t=>(this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger"),n(()=>t))))}searchArtworks(i, t=1, e=3){let o=new p().set("fields","id,title,artist_title,image_id,is_on_view").set("q",i).set("page",t.toString()).set("limit",e.toString());return this.http.get(`${this.apiUrl}/search`,{params:o}).pipe(s(a=>{let U=a.data.map(u=>g(m({},u),{image_url:r.getArtworkImageUrl(u,a.config.iiif_url)})),d=+a.pagination.total_pages;return this.totalPages.set(d),{artworks:U,total_page:d}}),l(a=>(this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0440\u0442\u0438\u043D. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger"),console.log("error"),n(()=>a))))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};export{y as a,I as b};
