import{a as A,b as S}from "./chunk-Z4SQVAYT.js";import{a as P,b as I}from "./chunk-AOK74BCM.js";import{$ as a,A as m,J as g,L as l,O as h,S as w,U as p,Y as k,Z as x,_ as n,aa as c,c as v,da as _,fa as d,j as u,ma as y,sa as C}from "./chunk-HBEHPOXJ.js";var M=(i, e)=>e.id;function O(i, e){i&1&&c(0,"app-loader")}function F(i, e){if(i&1&&c(0,"app-picture",11),i&2){let t=e.$implicit;p("artwork",t)("isSmallVersion",!0)}}function b(i, e){if(i&1&&(n(0,"div",10),k(1,F,1,2,"app-picture",11,M),a()),i&2){let t=_();l(),x(t.favoriteArtworks())}}var L=class i{favoriteArtworks=g([]);isLoadingArtworksList=g(!0);favoritesService=m(A);artworksService=m(I);loadedIds=new Set;constructor(){y(()=>{let e=this.favoritesService.getFavorites()(),t=this.favoriteArtworks(),r=t.map(o=>o.id),s=e.filter(o=>!this.loadedIds.has(o)),f=r.filter(o=>!e.includes(o));f.length>0&&(this.favoriteArtworks.set(t.filter(o=>!f.includes(o.id))),f.forEach(o=>this.loadedIds.delete(o))),this.loadedIds.size===0&&e.length>0&&this.isLoadingArtworksList.set(!0),s.length>0?this.loadArtworks(s):this.isLoadingArtworksList.set(!1),e.length===0&&(this.favoriteArtworks.set([]),this.loadedIds.clear(),this.isLoadingArtworksList.set(!1))})}loadArtworks(e){return v(this,null,function*(){try{let t=yield Promise.all(e.map(r=>u(this.artworksService.getArtworkById(r))));this.favoriteArtworks.update(r=>[...r,...t.filter(s=>s?(this.loadedIds.add(s.id),!0):!1)])}finally{this.isLoadingArtworksList.set(!1)}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-favorite-page"]],decls:16,vars:2,consts:[[1,"wrapper"],[1,"heading-section"],[1,"main-heading"],[1,"favorite-main-heading"],["src","bookmark.svg","alt","Bookmark",1,"bookmark"],[2,"color","#f17900"],[1,"favorite-list-section"],[1,"section-heading"],[4,"ngIf"],["class","favorite-list",4,"ngIf"],[1,"favorite-list"],[3,"artwork","isSmallVersion"]],template:function(t, r){t&1&&(n(0,"div",0)(1,"section",1)(2,"h1",2),d(3," Here are your "),n(4,"div",3),c(5,"img",4),n(6,"span",5),d(7,"favorites"),a()()()(),n(8,"section",6)(9,"div",7)(10,"h3"),d(11,"Saved by you"),a(),n(12,"h2"),d(13,"Your favorites list"),a()(),w(14,O,1,0,"app-loader",8)(15,b,3,0,"div",9),a()()),t&2&&(l(14),p("ngIf",r.isLoadingArtworksList()),l(),p("ngIf",!r.isLoadingArtworksList()))},dependencies:[S,C,P],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:120px;max-width:1280px;margin:0 auto;padding:120px 0}.heading-section[_ngcontent-%COMP%]{margin:0 auto}.favorite-main-heading[_ngcontent-%COMP%]{max-width:500px;display:flex;justify-content:center;align-items:center}.bookmark[_ngcontent-%COMP%]{width:74px}.favorite-list-section[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:40px}.section-heading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.section-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:var(--second-family);font-size:16px;font-weight:400;color:#e0a449}.section-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:var(--second-family);font-size:32px;font-weight:400;color:#393939}.favorite-list[_ngcontent-%COMP%]{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));justify-content:center}.loader-wrapper[_ngcontent-%COMP%]{grid-column:1/-1;padding:16px 0}"]})};export{L as FavouritePageComponent};
