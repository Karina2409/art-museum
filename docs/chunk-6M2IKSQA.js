import{$ as w,A as f,Da as y,J as u,O as b,_ as h,a as l,b as p,fa as _,i as m,k as n,q as g,ta as s,ua as A,x as c}from "./chunk-HBEHPOXJ.js";var S=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-loader"]],decls:4,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],["role","status",1,"spinner-border","text-warning"],[1,"visually-hidden"]],template:function(e, i){e&1&&(h(0,"div",0)(1,"div",1)(2,"span",2),_(3,"Loading..."),w()()())},encapsulation:2})};var F=class r{storageKey="favoriteArtworks";favorites=u(this.getAllFavorites());constructor(){}getAllFavorites(){return JSON.parse(localStorage.getItem(this.storageKey)||"[]")}toggleFavorite(t){if(this.isFavorite(t)){this.removeFromStorage(t);return}this.addToStorage(t)}isFavorite(t){return this.getAllFavorites().includes(t)}getFavorites(){return this.favorites}addToStorage(t){let e=[...this.favorites(),t];localStorage.setItem(this.storageKey,JSON.stringify(e)),this.favorites.set(e)}removeFromStorage(t){let e=this.favorites().filter(i=>i!==t);localStorage.setItem(this.storageKey,JSON.stringify(e)),this.favorites.set(e)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};var I=class r{totalPages=u(100);http=f(A);notification=f(y);apiUrl="https://api.artic.edu/api/v1/artworks";static getArtworkImageUrl(t, e){let i;return t.image_id!==null?i=`${e}/${t.image_id}/full/843,/0/default.jpg`:i="default-image.png",i}static getArtistNationality(t){return t.includes(`
`)?t.split(`
`)[1].split(",")[0]:t.includes("(")?t.split("(")[1].split(",")[0]:t}getArtworks(t=1,e=3){let i=new s().set("fields","id,title,artist_title,image_id,is_on_view").set("page",t.toString()).set("limit",e.toString());return this.http.get(this.apiUrl,{params:i}).pipe(n(a=>a.data.map(o=>p(l({},o),{image_url:r.getArtworkImageUrl(o,a.config.iiif_url)}))),g(a=>(this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0440\u0442\u0438\u043D. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger"),m(()=>a))))}getArtworkById(t){let e=new s().set("fields","id,title,date_display,image_id,is_on_view,dimensions,credit_line,department_title,artist_title,artist_display");return this.http.get(`${this.apiUrl}/${t}`,{params:e}).pipe(n(i=>{let a=p(l({},i.data),{image_url:r.getArtworkImageUrl(i.data,i.config.iiif_url)});return a.artist_display!==void 0&&(a.artist_nationality=r.getArtistNationality(a.artist_display)),a}),g(i=>(this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0440\u0442\u0438\u043D\u044B \u043F\u043E id. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger"),m(()=>i))))}getTotalPages(){let t=new s().set("limit","0");return this.http.get(this.apiUrl,{params:t}).pipe(n(e=>{let i=+e.pagination.total_pages;return this.totalPages.set(i),i}),g(e=>(this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger"),m(()=>e))))}searchArtworks(t,e=1,i=3){let a=new s().set("fields","id,title,artist_title,image_id,is_on_view").set("q",t).set("page",e.toString()).set("limit",i.toString());return this.http.get(`${this.apiUrl}/search`,{params:a}).pipe(n(o=>{let x=o.data.map(v=>p(l({},v),{image_url:r.getArtworkImageUrl(v,o.config.iiif_url)})),d=+o.pagination.total_pages;return this.totalPages.set(d),{artworks:x,total_page:d}}))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{S as a,F as b,I as c};
