import{$ as k,A as s,B as p,H as v,I as w,J as a,M as P,Q as S,T as u,U as y,Y as r,Z as l,_ as h,aa as m,ba as c,ca as b,da as f,ea as g,ka as I,v as C,va as M,y as _}from "./chunk-I6TDCWYR.js";var x=class o{storageKey="favoriteArtworks";favorites=v(this.getAllFavorites());constructor(){}getAllFavorites(){return JSON.parse(localStorage.getItem(this.storageKey)||"[]")}toggleFavorite(i){if(this.isFavorite(i)){this.removeFromStorage(i);return}this.addToStorage(i)}isFavorite(i){return this.getAllFavorites().includes(i)}getFavorites(){return this.favorites}addToStorage(i){let e=[...this.favorites(),i];localStorage.setItem(this.storageKey,JSON.stringify(e)),this.favorites.set(e)}removeFromStorage(i){let e=this.favorites().filter(n=>n!==i);localStorage.setItem(this.storageKey,JSON.stringify(e)),this.favorites.set(e)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})};function V(o, i){if(o&1){let e=k();r(0,"div",0)(1,"div",2),m("click",function(){s(e);let t=c();return p(t.navigateToArtworkInfo(t.artwork.id))}),r(2,"img",3),m("error",function(t){s(e);let d=c();return p(d.onImageError(t))}),l()(),r(3,"div",4),m("click",function(){s(e);let t=c();return p(t.navigateToArtworkInfo(t.artwork.id))}),r(4,"div",5)(5,"div",6)(6,"p",7),f(7),l(),r(8,"p",8),f(9),l()(),r(10,"p",9),f(11),l()(),r(12,"div",10),m("click",function(t){s(e);let d=c();return p(d.toggleFavorite(t))}),h(13,"img",11),l()()()}if(o&2){let e,n,t=c();a(2),u("default",t.isDefaultImage),b("src",t.artwork.image_url,w),a(5),g((e=t.artwork.title)!==null&&e!==void 0?e:"Unknown"),a(2),g((n=t.artwork.artist_title)!==null&&n!==void 0?n:"Unknown"),a(2),g(t.artwork.is_on_view?"Public":"Private"),a(),u("favourite-active",t.isFavorite())}}function T(o, i){if(o&1){let e=k();r(0,"div",12),m("click",function(){s(e);let t=c();return p(t.navigateToArtworkInfo(t.artwork.id))}),r(1,"div",13)(2,"img",3),m("error",function(t){s(e);let d=c();return p(d.onImageError(t))}),l()(),r(3,"div",5)(4,"div",6)(5,"p",7),f(6),l(),r(7,"p",8),f(8),l()(),r(9,"p",9),f(10),l()(),r(11,"div",10),m("click",function(t){s(e);let d=c();return p(d.toggleFavorite(t))}),h(12,"img",11),l()()}if(o&2){let e=c();a(2),u("image-small-default",e.isDefaultImage),b("src",e.artwork.image_url,w),a(4),g(e.artwork.title||"Unknown"),a(2),g(e.artwork.artist_title||"Unknown"),a(2),g(e.artwork.is_on_view?"Public":"Private"),a(),u("favourite-active",e.isFavorite())}}var F=class o{artwork;isSmallVersion;isFavorite=v(!1);isDefaultImage=!1;router=_(M);favoritesService=_(x);constructor(){I(()=>{this.artwork&&this.isFavorite.set(this.favoritesService.isFavorite(this.artwork.id))})}toggleFavorite(i){i.stopPropagation(),this.favoritesService.toggleFavorite(this.artwork.id),this.isFavorite.set(this.favoritesService.isFavorite(this.artwork.id))}navigateToArtworkInfo(i){this.router.navigate([`/artwork/${i}`])}onImageError(i){if(!(i.target instanceof HTMLImageElement))return;let e=i.target;e.src="default-image.png",this.isDefaultImage=!0}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-picture"]],inputs:{artwork:"artwork",isSmallVersion:"isSmallVersion"},decls:2,vars:1,consts:[[1,"picture"],[1,"picture-small"],[1,"image-container",3,"click"],["alt","img",1,"image",3,"error","src"],[1,"picture-info-container",3,"click"],[1,"picture-info"],[1,"artist-info"],[1,"picture-title"],[1,"artist-name"],[1,"is-public-domain"],[1,"favourite-icon",3,"click"],["src","bookmark.svg","alt","bookmark",1,"bookmark"],[1,"picture-small",3,"click"],[1,"small-image-container"]],template:function(e, n){e&1&&S(0,V,14,8,"div",0)(1,T,13,8,"div",1),e&2&&y(n.isSmallVersion?1:0)},styles:[".picture[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.image-container[_ngcontent-%COMP%]{overflow:hidden;display:flex;align-items:center;justify-content:center;min-width:390px;max-width:390px;height:444px}@media (max-width: 450px){.image-container[_ngcontent-%COMP%]{min-width:370px;max-width:370px}}.image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}.image.default[_ngcontent-%COMP%]{padding:10px 30px;object-fit:contain;border:solid 3px #4a2900;border-radius:15px}.picture-info-container[_ngcontent-%COMP%]{position:absolute;bottom:-70px;left:25px;display:flex;align-items:center;justify-content:space-between;width:335px;padding:32px 24px;border:1px solid #f0f1f1;background-color:#fff}@media (max-width: 450px){.picture-info-container[_ngcontent-%COMP%]{left:20px;min-width:325px;max-width:325px}}.picture-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px;min-width:0}.artist-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1px;width:100%}.picture-title[_ngcontent-%COMP%]{overflow:hidden;font-family:var(--second-family);font-size:17px;font-weight:500;line-height:150%;color:#393939;text-overflow:ellipsis;letter-spacing:-.03em;white-space:nowrap;display:block;max-width:100%}.artist-name[_ngcontent-%COMP%]{overflow:hidden;font-family:var(--second-family);font-size:15px;font-weight:400;line-height:171%;color:#e0a449;text-overflow:ellipsis;letter-spacing:-.01em;white-space:nowrap;display:block;max-width:100%}.is-public-domain[_ngcontent-%COMP%]{font-family:var(--second-family);font-size:15px;font-weight:700;line-height:171%;color:#393939;letter-spacing:-.01em}.favourite-icon[_ngcontent-%COMP%]{width:59px;height:59px;padding:17px;border-radius:35px;flex-shrink:0;background:#f9f9f9}.favourite-icon[_ngcontent-%COMP%]   .bookmark[_ngcontent-%COMP%]{width:24px;height:24px}.favourite-icon.favourite-active[_ngcontent-%COMP%]{background:#fbd7b24d}.picture-small[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:16px;align-items:center;width:100%;height:auto;padding:16px;border:1px solid #f0f1f1;background-color:#fff;transition:transform .3s ease}.picture-small[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.image-small-default[_ngcontent-%COMP%]{padding:5px}.small-image-container[_ngcontent-%COMP%]{overflow:hidden;display:flex;align-items:center;justify-content:center;width:80px;height:80px;flex-shrink:0}.small-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]})};export{x as a,F as b};
