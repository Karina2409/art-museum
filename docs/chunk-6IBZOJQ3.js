import{a as N,b as z,c as Q,d as D,e as G,f as j,g as B,h as $,i as W,j as Z}from "./chunk-PSCCPHIC.js";import{a as H}from "./chunk-N6KZA7U6.js";import{a as I,c as R}from "./chunk-6M2IKSQA.js";import{$ as o,A as v,C as h,D as f,Da as E,E as C,G as M,J as p,L as a,O as _,S as P,U as s,V as O,X as A,Y as k,Z as y,_ as r,aa as l,ba as b,ca as g,da as d,fa as m,ha as F,ma as w,r as S,ra as T,s as L,sa as V}from "./chunk-HBEHPOXJ.js";var x=class i{search=new M;searchForm;constructor(){this.searchForm=new G({searchQuery:new j("",[])})}ngOnInit(){this.searchForm.get("searchQuery")?.valueChanges.pipe(S(500),L()).subscribe(e=>{if(e=e.trim(),e===""){this.search.emit(e);return}this.searchForm.get("searchQuery")?.setValidators([z.minLength(3)]),this.searchForm.get("searchQuery")?.updateValueAndValidity({emitEvent:!1}),this.searchForm.valid&&this.search.emit(e)})}onSubmit(){this.searchForm.valid&&this.search.emit(this.searchForm.value.searchQuery)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-search-bar"]],outputs:{search:"search"},decls:4,vars:2,consts:[[1,"search-container",3,"ngSubmit","formGroup"],["type","text","placeholder","Search Art, Artist, Work...","formControlName","searchQuery",1,"form-control","search-input"],["type","submit",1,"search-btn",3,"disabled"],[1,"bi","bi-search"]],template:function(t, n){t&1&&(r(0,"form",0),g("ngSubmit",function(){return n.onSubmit()}),l(1,"input",1),r(2,"button",2),l(3,"span",3),o()()),t&2&&(s("formGroup",n.searchForm),a(2),s("disabled",n.searchForm.invalid))},dependencies:[Z,B,N,Q,D,$,W],styles:[".search-container[_ngcontent-%COMP%]{display:flex;max-width:762px;width:100%;height:64px;padding:16px;border-radius:16px;background:#3939390d}.search-input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;outline:none;font-size:16px;color:#555}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none;border:none}.search-input[_ngcontent-%COMP%]::placeholder{font-family:var(--font-family);font-weight:400;font-size:14px;text-transform:capitalize;color:#39393980}.search-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:5px}.search-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#555}"]})};var X=(i, e)=>e.id;function Y(i, e){i&1&&l(0,"app-loader",14)}function q(i, e){if(i&1&&l(0,"app-picture",16),i&2){let t=e.$implicit;s("artwork",t)("isSmallVersion",!1)}}function ee(i, e){if(i&1&&(r(0,"div",15),k(1,q,1,2,"app-picture",16,X),o()),i&2){let t=d();a(),y(t.artworksPagination())}}function te(i, e){if(i&1){let t=b();r(0,"button",17),g("click",function(){h(t);let c=d();return f(c.prevPages())}),C(),r(1,"svg",18),l(2,"path",19),o()()}}function ie(i, e){if(i&1){let t=b();r(0,"button",20),g("click",function(){let c=h(t).$implicit,u=d();return f(u.goToPage(c))}),m(1),o()}if(i&2){let t=e.$implicit,n=d();O("active",t===n.currentPage()),a(),F(" ",t," ")}}function ne(i, e){if(i&1){let t=b();r(0,"button",17),g("click",function(){h(t);let c=d();return f(c.nextPages())}),C(),r(1,"svg",18),l(2,"path",21),o()()}}function re(i, e){i&1&&l(0,"app-loader")}function oe(i, e){if(i&1&&l(0,"app-picture",23),i&2){let t=e.$implicit;s("artwork",t)("isSmallVersion",!0)}}function ae(i, e){if(i&1&&(r(0,"div",22),k(1,oe,1,2,"app-picture",23,A),o()),i&2){let t=d();a(),y(t.artworksList())}}var U=class i{artworksPagination=p([]);artworksList=p([]);currentPage=p(1);totalPages=p(100);itemsPerPage=p(3);visiblePageCount=4;searchQuery=p("");isLoadingPaginationArtworks=p(!0);isLoadingArtworksList=p(!0);artworksService=v(R);notification=v(E);constructor(){this.updateItemsPerPage(),window.addEventListener("resize",()=>{this.updateItemsPerPage()}),w(()=>{this.artworksService.getTotalPages().subscribe({next: e=>this.totalPages.set(e)})}),w(()=>{let e=this.currentPage(),t=this.searchQuery(),n=this.itemsPerPage();this.loadArtworksPagination(t,e,n)}),w(()=>{this.loadArtworksList()})}onSearch(e){this.searchQuery.set(e),this.currentPage.set(1)}nextPages(){this.currentPage()<this.totalPages()&&this.currentPage.update(e=>e+this.visiblePageCount)}prevPages(){this.currentPage()>1&&this.currentPage.update(e=>e-this.visiblePageCount)}getVisiblePages(){let e=Math.floor((this.currentPage()-1)/this.visiblePageCount)*this.visiblePageCount+1,t=Math.min(e+this.visiblePageCount-1,this.totalPages());return Array.from({length:t-e+1},(n, c)=>e+c)}goToPage(e){e!==this.currentPage()&&this.currentPage.set(e)}loadArtworksPagination(e, t, n){this.isLoadingPaginationArtworks.set(!0),this.artworksService.searchArtworks(e,t,n).subscribe({next:({artworks:c,total_page:u})=>{this.artworksPagination.set(c),this.totalPages.set(u),this.isLoadingPaginationArtworks.set(!1)},error:()=>{this.isLoadingPaginationArtworks.set(!1),this.notification.show("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043A\u0430\u0440\u0442\u0438\u043D. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435","danger")}})}loadArtworksList(){this.isLoadingArtworksList.set(!0),this.artworksService.getArtworks(1,9).subscribe({next: e=>{this.artworksList.set(e),this.isLoadingArtworksList.set(!1)},error:()=>{this.isLoadingArtworksList.set(!1)}})}updateItemsPerPage(){let e=window.innerWidth;if(e<825){this.itemsPerPage.set(1);return}else if(e<1245){this.itemsPerPage.set(2);return}else this.itemsPerPage.set(3)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-home-page"]],decls:28,vars:7,consts:[[1,"wrapper"],[1,"search-section"],[1,"main-heading"],[2,"color","#f17900"],[1,"search-bar-container",3,"search"],[1,"content-container"],[1,"section-heading"],["class","home-page__loader",4,"ngIf"],["class","artworks-list",4,"ngIf"],[1,"pagination-container"],["class","pagination-arrow",3,"click",4,"ngIf"],["class","pagination-button",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","artworks-more-list",4,"ngIf"],[1,"home-page__loader"],[1,"artworks-list"],[1,"app-picture",3,"artwork","isSmallVersion"],[1,"pagination-arrow",3,"click"],["width","10","height","15","viewBox","0 0 10 15","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M8.53209 1.28558L7 0L0.572122 7.66044L1.0734 8.08107L1.05398 8.10421L8.71442 14.5321L10 13L3.37037 7.43708L8.53209 1.28558Z","fill","#393939"],[1,"pagination-button",3,"click"],["fill-rule","evenodd","clip-rule","evenodd","d","M1.46791 13.7144L3 15L9.42788 7.33956L8.9266 6.91893L8.94602 6.89579L1.28558 0.467911L-1.07377e-07 2L6.62963 7.56292L1.46791 13.7144Z","fill","#393939"],[1,"artworks-more-list"],[3,"artwork","isSmallVersion"]],template:function(t, n){t&1&&(r(0,"div",0)(1,"section",1)(2,"h1",2),m(3," let's find some "),r(4,"span",3),m(5,"art"),o(),m(6," here! "),o(),r(7,"app-search-bar",4),g("search",function(u){return n.onSearch(u)}),o()(),r(8,"section",5)(9,"div",6)(10,"h3"),m(11,"Topics for you"),o(),r(12,"h2"),m(13,"Our special gallery"),o()(),P(14,Y,1,0,"app-loader",7)(15,ee,3,0,"div",8),r(16,"div",9),P(17,te,3,0,"button",10)(18,ie,2,3,"button",11)(19,ne,3,0,"button",10),o()(),r(20,"section",5)(21,"div",6)(22,"h3"),m(23,"Here some more"),o(),r(24,"h2"),m(25,"Other works for you"),o()(),P(26,re,1,0,"app-loader",12)(27,ae,3,0,"div",13),o()()),t&2&&(a(14),s("ngIf",n.isLoadingPaginationArtworks()),a(),s("ngIf",!n.isLoadingPaginationArtworks()),a(2),s("ngIf",n.currentPage()>n.visiblePageCount),a(),s("ngForOf",n.getVisiblePages()),a(),s("ngIf",n.currentPage()+4<=n.totalPages()),a(7),s("ngIf",n.isLoadingArtworksList()),a(),s("ngIf",!n.isLoadingArtworksList()))},dependencies:[H,x,V,T,I],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:120px;max-width:1280px;margin:0 auto;padding:120px 0}.search-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:72px;align-items:center;width:100%}.search-bar-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.main-heading[_ngcontent-%COMP%]{max-width:680px;font-family:var(--second-family);font-size:64px;font-weight:700;color:#393939;text-align:center;text-transform:capitalize}@media (max-width: 767px){.main-heading[_ngcontent-%COMP%]{font-size:52px;max-width:600px}}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:40px;align-items:center;justify-content:center;width:100%}.section-heading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.section-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:var(--second-family);font-size:16px;font-weight:400;color:#e0a449}.section-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:var(--second-family);font-size:32px;font-weight:400;color:#393939}.artworks-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(390px,1fr));gap:10px;width:100%;min-height:514px;justify-items:center;align-items:center}.home-page__loader[_ngcontent-%COMP%]{min-height:514px;display:flex;justify-content:center;align-items:center}.app-picture[_ngcontent-%COMP%]{height:514px}.artworks-more-list[_ngcontent-%COMP%]{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));width:100%}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px}.pagination-arrow[_ngcontent-%COMP%]{border:none;background:none;display:flex;justify-content:center;align-items:center}.pagination-button[_ngcontent-%COMP%]{border:none;background:none;font-family:var(--second-family);font-weight:300;font-size:18px;line-height:133%;color:#393939;padding:3px 10px}.pagination-button.active[_ngcontent-%COMP%]{background-color:#f17900;border-radius:4px;font-weight:600;line-height:128%;color:#fff}"]})};export{U as HomePageComponent};
